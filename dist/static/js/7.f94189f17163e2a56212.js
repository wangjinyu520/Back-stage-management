webpackJsonp([7],{"+O7c":function(e,t){},OIhi:function(e,t){},g5t5:function(e,t,l){"use strict";var i=l("woOf"),n=l.n(i),r=[{name:"订单已提交，等待付款",time:"2017-04-01 12:00:00 "},{name:"订单付款成功",time:"2017-04-01 12:00:00 "},{name:"在北京市进行下级地点扫描，等待付款",time:"2017-04-01 12:00:00 "},{name:"在分拨中心广东深圳公司进行卸车扫描，等待付款",time:"2017-04-01 12:00:00 "},{name:"在广东深圳公司进行发出扫描",time:"2017-04-01 12:00:00 "},{name:"到达目的地网点广东深圳公司，快件将很快进行派送",time:"2017-04-01 12:00:00 "},{name:"订单已签收，期待再次为您服务",time:"2017-04-01 12:00:00 "}],s={name:"logisticsDialog",props:{value:Boolean},computed:{visible:{get:function(){return this.value},set:function(e){this.value=e}}},data:function(){return{logisticsList:n()({},r)}},methods:{emitInput:function(e){this.$emit("input",e)},handleClose:function(){this.emitInput(!1)}}},a={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("el-dialog",{attrs:{title:"订单跟踪",visible:e.visible,"before-close":e.handleClose,width:"40%"},on:{"update:visible":function(t){e.visible=t}}},[l("el-steps",{attrs:{direction:"vertical",active:6,"finish-status":"success",space:"50px"}},e._l(e.logisticsList,function(e){return l("el-step",{key:e.name,attrs:{title:e.name,description:e.time}})}),1)],1)},staticRenderFns:[]};var o=l("VU/8")(s,a,!1,function(e){l("+O7c")},null,null);t.a=o.exports},u5in:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l("woOf"),n=l.n(i),r=l("FWz8"),s=l("xT6B"),a={pageNum:1,pageSize:10,orderSn:null,receiverKeyword:null,status:null,orderType:null,sourceType:null,createTime:null},o={name:"orderList",components:{LogisticsDialog:l("g5t5").a},data:function(){return{listQuery:n()({},a),listLoading:!0,list:null,total:null,operateType:null,multipleSelection:[],closeOrder:{dialogVisible:!1,content:null,orderIds:[]},statusOptions:[{label:"待付款",value:1},{label:"待发货",value:2},{label:"待收货",value:3},{label:"待评价",value:4},{label:"交易完成",value:5}],orderTypeOptions:[{label:"正常订单",value:1},{label:"积分订单",value:2}],sourceTypeOptions:[{label:"抢购",value:2},{label:"拼团",value:3}],operateOptions:[{label:"批量发货",value:1},{label:"关闭订单",value:2},{label:"删除订单",value:3}],logisticsDialogVisible:!1}},created:function(){this.getList()},filters:{formatCreateTime:function(e){var t=new Date(e);return Object(s.a)(t,"yyyy-MM-dd hh:mm:ss")},formatPayType:function(e){return 1===e?"支付宝":2===e?"微信":"未支付"},formatSourceType:function(e){return 2===e?"抢购":3===e?"拼团":"普通"},formatStatus:function(e){return 1===e?"待付款":2===e?"待发货":3===e?"待收货":4===e?"待评价":5===e?"交易完成":void 0}},methods:{handleResetSearch:function(){this.listQuery=n()({},a)},handleSearchList:function(){this.listQuery.pageNum=1,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},handleViewOrder:function(e,t){this.$router.push({path:"/oms/orderDetail",query:{id:t.orderId}})},handleCloseOrder:function(e,t){this.closeOrder.dialogVisible=!0,this.closeOrder.orderIds=[t.id]},handleDeliveryOrder:function(e,t){console.log(t);var l=this.covertOrder(t);this.$router.push({path:"/oms/deliverOrderList",query:{list:[l]}})},handleViewLogistics:function(e,t){this.logisticsDialogVisible=!0},handleDeleteOrder:function(e,t){var l=[];l.push(t.orderId),this.deleteOrder(l)},handleBatchOperate:function(){var e=this;null==this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要操作的订单",type:"warning",duration:1e3}):1===this.operateType?this.$confirm("是否要进行发货操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=new URLSearchParams,l=[],i=0;i<e.multipleSelection.length;i++)l.push(e.multipleSelection[i].orderId);t.append("ids",l),t.append("type","3"),Object(r.a)(t).then(function(t){e.getList(),e.$message({type:"success",message:"发货成功!"})})}):2===this.operateType?this.$confirm("是否要进行关闭订单操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=new URLSearchParams,l=[],i=0;i<e.multipleSelection.length;i++)l.push(e.multipleSelection[i].orderId);t.append("ids",l),t.append("type","5"),Object(r.a)(t).then(function(t){e.getList(),e.$message({type:"success",message:"关闭成功!"})})}):3===this.operateType&&this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=new URLSearchParams,l=[],i=0;i<e.multipleSelection.length;i++)l.push(e.multipleSelection[i].orderId);t.append("ids",l),t.append("type","2"),Object(r.a)(t).then(function(t){e.getList(),e.$message({type:"success",message:"删除成功!"})})})},handleSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},handleCloseOrderConfirm:function(){var e=this;if(null!=this.closeOrder.content&&""!==this.closeOrder.content){var t=new URLSearchParams;t.append("ids",this.closeOrder.orderIds),t.append("note",this.closeOrder.content),Object(r.b)(t).then(function(t){e.closeOrder.orderIds=[],e.closeOrder.dialogVisible=!1,e.getList(),e.$message({message:"修改成功",type:"success",duration:1e3})})}else this.$message({message:"操作备注不能为空",type:"warning",duration:1e3})},getList:function(){var e=this;this.listLoading=!0,Object(r.e)(this.listQuery).then(function(t){e.listLoading=!1,e.list=t.data,e.total=t.total})},deleteOrder:function(e){var t=this;this.$confirm("是否要进行该删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var l=new URLSearchParams;l.append("orderId",e),Object(r.c)(l).then(function(e){t.$message({message:"删除成功！",type:"success",duration:1e3}),t.getList()})})},covertOrder:function(e){e.receiverProvince,e.receiverCity,e.receiverRegion,e.receiverDetailAddress;return{orderId:e.orderId,orderSn:e.orderSn,receiverName:e.receiverName,receiverPhone:e.addresseePhone,receiverPostCode:e.receiverPostCode,address:e.addressee,deliveryCompany:null,deliverySn:null}}}},c={render:function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",{staticClass:"app-container"},[l("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[l("div",[l("i",{staticClass:"el-icon-search"}),e._v(" "),l("span",[e._v("筛选搜索")]),e._v(" "),l("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSearchList()}}},[e._v("\n        查询搜索\n      ")]),e._v(" "),l("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("\n        重置\n      ")])],1),e._v(" "),l("div",{staticStyle:{"margin-top":"15px"}},[l("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"140px"}},[l("el-form-item",{attrs:{label:"输入搜索："}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"订单编号"},model:{value:e.listQuery.orderId,callback:function(t){e.$set(e.listQuery,"orderId",t)},expression:"listQuery.orderId"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"收货人："}},[l("el-input",{staticClass:"input-width",attrs:{placeholder:"收货人姓名/手机号码"},model:{value:e.listQuery.receiverKeyword,callback:function(t){e.$set(e.listQuery,"receiverKeyword",t)},expression:"listQuery.receiverKeyword"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"提交时间："}},[l("el-date-picker",{staticClass:"input-width",attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"请选择时间"},model:{value:e.listQuery.createTime,callback:function(t){e.$set(e.listQuery,"createTime",t)},expression:"listQuery.createTime"}})],1),e._v(" "),l("el-form-item",{attrs:{label:"订单状态："}},[l("el-select",{staticClass:"input-width",attrs:{placeholder:"全部",clearable:""},model:{value:e.listQuery.status,callback:function(t){e.$set(e.listQuery,"status",t)},expression:"listQuery.status"}},e._l(e.statusOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"订单分类："}},[l("el-select",{staticClass:"input-width",attrs:{placeholder:"全部",clearable:""},model:{value:e.listQuery.orderType,callback:function(t){e.$set(e.listQuery,"orderType",t)},expression:"listQuery.orderType"}},e._l(e.orderTypeOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),l("el-form-item",{attrs:{label:"订单来源："}},[l("el-select",{staticClass:"input-width",attrs:{placeholder:"全部",clearable:""},model:{value:e.listQuery.sourceType,callback:function(t){e.$set(e.listQuery,"sourceType",t)},expression:"listQuery.sourceType"}},e._l(e.sourceTypeOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)]),e._v(" "),l("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[l("i",{staticClass:"el-icon-tickets"}),e._v(" "),l("span",[e._v("数据列表")])]),e._v(" "),l("div",{staticClass:"table-container"},[l("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"orderTable",staticStyle:{width:"90%",overflow:"auto"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[l("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),e._v(" "),l("el-table-column",{attrs:{label:"编号",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.orderId))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"订单编号",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.orderSn))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"提交时间",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatCreateTime")(t.row.createdDate)))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"订单用户ID",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.userId))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"订单金额",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("￥"+e._s(t.row.orderAmount))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"物流单号",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.expressCode))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"物流渠道",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.expressCompany))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"订单状态",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatStatus")(t.row.status)))]}}])}),e._v(" "),l("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[l("el-button",{attrs:{size:"mini"},on:{click:function(l){return e.handleViewOrder(t.$index,t.row)}}},[e._v("查看订单\n          ")]),e._v(" "),l("el-button",{directives:[{name:"show",rawName:"v-show",value:0===t.row.status,expression:"scope.row.status===0"}],attrs:{size:"mini"},on:{click:function(l){return e.handleCloseOrder(t.$index,t.row)}}},[e._v("关闭订单\n          ")]),e._v(" "),l("el-button",{directives:[{name:"show",rawName:"v-show",value:2===t.row.status,expression:"scope.row.status===2"}],attrs:{size:"mini"},on:{click:function(l){return e.handleDeliveryOrder(t.$index,t.row)}}},[e._v("订单发货\n          ")]),e._v(" "),l("el-button",{directives:[{name:"show",rawName:"v-show",value:2===t.row.status||3===t.row.status,expression:"scope.row.status===2||scope.row.status===3"}],attrs:{size:"mini"},on:{click:function(l){return e.handleViewLogistics(t.$index,t.row)}}},[e._v("订单跟踪\n          ")]),e._v(" "),l("el-button",{directives:[{name:"show",rawName:"v-show",value:4===t.row.status,expression:"scope.row.status===4"}],attrs:{size:"mini",type:"danger"},on:{click:function(l){return e.handleDeleteOrder(t.$index,t.row)}}},[e._v("删除订单\n          ")])]}}])})],1)],1),e._v(" "),l("div",{staticClass:"batch-operate-container"},[l("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:e.operateType,callback:function(t){e.operateType=t},expression:"operateType"}},e._l(e.operateOptions,function(e){return l("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),l("el-button",{staticClass:"search-button",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleBatchOperate()}}},[e._v("\n      确定\n    ")])],1),e._v(" "),l("div",{staticClass:"pagination-container"},[l("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","current-page":e.listQuery.pageNum,"page-size":e.listQuery.pageSize,"page-sizes":[5,10,15],total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:current-page":function(t){return e.$set(e.listQuery,"pageNum",t)}}})],1),e._v(" "),l("el-dialog",{attrs:{title:"关闭订单",visible:e.closeOrder.dialogVisible,width:"30%"},on:{"update:visible":function(t){return e.$set(e.closeOrder,"dialogVisible",t)}}},[l("span",{staticStyle:{"vertical-align":"top"}},[e._v("操作备注：")]),e._v(" "),l("el-input",{staticStyle:{width:"80%"},attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.closeOrder.content,callback:function(t){e.$set(e.closeOrder,"content",t)},expression:"closeOrder.content"}}),e._v(" "),l("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){e.closeOrder.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:e.handleCloseOrderConfirm}},[e._v("确 定")])],1)],1),e._v(" "),l("logistics-dialog",{model:{value:e.logisticsDialogVisible,callback:function(t){e.logisticsDialogVisible=t},expression:"logisticsDialogVisible"}})],1)},staticRenderFns:[]};var u=l("VU/8")(o,c,!1,function(e){l("OIhi")},"data-v-53b2cf10",null);t.default=u.exports}});
//# sourceMappingURL=7.f94189f17163e2a56212.js.map