webpackJsonp([28],{"2phB":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),n=a.n(r),l=a("G0J2"),i=a("+yKa"),s=(a("3f40"),a("4qOc"),a("+cgv"),a("TZVV")),c=a("Z/6d"),o=a("KA92"),m=[{label:"灯光师",value:1},{label:"音响师",value:2},{label:"视频师",value:3},{label:"项目经理",value:4},{label:"搭建",value:5},{label:"舞美",value:6}],u=[{label:"男",value:1},{label:"女",value:2}],d={bannerName:null,jumpUrl:null,bannerType:1,description:null,sortIndex:0,imageUrl:null,startDate:null,endDate:null,status:0},h={name:"HomeAdvertiseDetail",components:{SingleUpload:s.a,quillEditor:l.quillEditor},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{imageUrlList:[],quillOption:i.a,merchant:{merchantName:null,manager:null},uploadPath:o.c,rules:{bannerName:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],jumpUrl:[{required:!0,message:"请输入广告链接",trigger:"blur"}],startDate:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endDate:[{required:!0,message:"请选择到期时间",trigger:"blur"}],imageUrl:[{required:!0,message:"请选择广告图片",trigger:"blur"}]},typeOptions:n()({},m),genderOptions:n()({},u)}},created:function(){var e=this;if(console.log(o.c),console.log(this.uploadPath),this.isEdit){console.log("merchantId is"+this.$route.query.merchantId);var t=new URLSearchParams;t.append("merchantId",this.$route.query.merchantId),Object(c.g)(t).then(function(t){e.merchant=t.data,e.merchant.activated=3,e.imageUrlList=t.data.merchantLogo.split(",")})}else this.merchant=n()({},d)},methods:{uploadPicUrl:function(e){this.merchant.merchantLogo=e.data},handlePictureCardPreview:function(e){console.log(e)},handleAvatarSuccess:function(e){this.merchant.merchantLogo=e.data},uploadProductUrl:function(e){console.log(e),console.log("uploadSuccess"),this.merchant.imageUrl=e.data},checkType:function(e){console.log(e),this.merchant.file=e.raw,void 0!=window.createObjectURL?this.merchant.imageUrl=window.createObjectURL(e.raw):void 0!=window.URL?this.merchant.imageUrl=window.URL.createObjectURL(e.raw):void 0!=window.webkitURL&&(this.merchant.imageUrl=window.webkitURL.createObjectURL(e.raw))},onSubmit:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return t.$message({message:"验证失败",type:"error",duration:1e3}),!1;t.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(t.isEdit){var a=new URLSearchParams;a.append("userId",t.$route.query.merchantId),a.append("merchantName",t.merchant.merchantName),a.append("manager",t.merchant.manager),a.append("mobile",t.merchant.mobile),a.append("address",t.merchant.address),a.append("activated",t.merchant.activated),a.append("description",t.merchant.description),a.append("merchantLogo",t.merchant.merchantLogo),console.log("merchant:"+a),Object(c.i)(a).then(function(a){t.$refs[e].resetFields(),t.$message({message:"修改成功",type:"success",duration:1e3}),t.$router.back()})}else Object(c.c)(t.merchant).then(function(a){t.$refs[e].resetFields(),t.merchant=n()({},d),t.$message({message:"提交成功",type:"success",duration:1e3})})})})},resetForm:function(e){this.$refs[e].resetFields(),this.merchant=n()({},d)}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[a("el-form",{ref:"companyFrom",attrs:{model:e.merchant,rules:e.rules,"label-width":"150px",size:"small"}},[a("el-form-item",{attrs:{label:"店铺名：",prop:"name"}},[a("el-input",{staticClass:"input-width",model:{value:e.merchant.merchantName,callback:function(t){e.$set(e.merchant,"merchantName",t)},expression:"merchant.merchantName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺logo："}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.uploadPath,"show-file-list":!1,"on-success":e.uploadPicUrl,accept:".jpg,.jpeg,.png,.gif"}},[e.merchant.merchantLogo?a("img",{staticClass:"avatar",staticStyle:{height:"140px"},attrs:{src:e.merchant.merchantLogo}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人：",prop:"name"}},[a("el-input",{staticClass:"input-width",model:{value:e.merchant.manager,callback:function(t){e.$set(e.merchant,"manager",t)},expression:"merchant.manager"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人联系方式：",prop:"name"}},[a("el-input",{staticClass:"input-width",model:{value:e.merchant.mobile,callback:function(t){e.$set(e.merchant,"mobile",t)},expression:"merchant.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺地址：",prop:"name"}},[a("el-input",{staticClass:"input-width",model:{value:e.merchant.address,callback:function(t){e.$set(e.merchant,"address",t)},expression:"merchant.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺简介："}},[a("quillEditor",{ref:"myTextEditor",attrs:{options:e.quillOption},model:{value:e.merchant.description,callback:function(t){e.$set(e.merchant,"description",t)},expression:"merchant.description"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"审核通过/不通过："}},[a("el-radio-group",{model:{value:e.merchant.activated,callback:function(t){e.$set(e.merchant,"activated",t)},expression:"merchant.activated"}},[a("el-radio",{attrs:{label:4}},[e._v("审核不通过")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("审核通过")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("companyFrom")}}},[e._v("提交")]),e._v(" "),e.isEdit?e._e():a("el-button",{on:{click:function(t){return e.resetForm("companyFrom")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var g={name:"updateHomeAdvertise",components:{HomeAdvertiseDetail:a("VU/8")(h,p,!1,function(e){a("WltB")},"data-v-0e90f718",null).exports}},f={render:function(){var e=this.$createElement;return(this._self._c||e)("home-advertise-detail",{attrs:{isEdit:!0}})},staticRenderFns:[]};var v=a("VU/8")(g,f,!1,function(e){a("ZA+t")},null,null);t.default=v.exports},WltB:function(e,t){},"ZA+t":function(e,t){}});
//# sourceMappingURL=28.41c412529c486b3c19c5.js.map