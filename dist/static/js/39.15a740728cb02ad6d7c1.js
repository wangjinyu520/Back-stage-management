webpackJsonp([39],{"8ciV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("woOf"),n=a.n(r),i=a("G0J2"),l=a("+yKa"),s=(a("3f40"),a("4qOc"),a("+cgv"),a("TZVV")),o=a("Z/6d"),c=a("KA92"),m=[{label:"灯光师",value:1},{label:"音响师",value:2},{label:"视频师",value:3},{label:"项目经理",value:4},{label:"搭建",value:5},{label:"舞美",value:6}],u=[{label:"男",value:1},{label:"女",value:2}],d={bannerName:null,jumpUrl:null,bannerType:1,description:null,sortIndex:0,imageUrl:null,startDate:null,endDate:null,status:0},p={name:"HomeAdvertiseDetail",components:{SingleUpload:s.a,quillEditor:i.quillEditor},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{params:new FormData,fileList:[],quillOption:l.a,merchant:null,uploadPath:c.c,rules:{bannerName:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],jumpUrl:[{required:!0,message:"请输入广告链接",trigger:"blur"}],startDate:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endDate:[{required:!0,message:"请选择到期时间",trigger:"blur"}],imageUrl:[{required:!0,message:"请选择广告图片",trigger:"blur"}]},typeOptions:n()({},m),genderOptions:n()({},u)}},created:function(){var e=this;if(console.log(c.c),console.log(this.uploadPath),this.isEdit){console.log("merchantId is"+this.$route.query.merchantId);var t=new URLSearchParams;t.append("merchantId",this.$route.query.merchantId),Object(o.g)(t).then(function(t){e.merchant=t.data,e.merchant.activated=1,e.imageUrlList=t.data.companyProve.split(",")})}else this.merchant=n()({},d)},methods:{uploadFile:function(e){this.params.append("file",e.file)},handleRemove:function(e,t){for(var a in this.picList)this.picList[a].key===e.uid&&this.picList.splice(a,1)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,a="image/png"===e.type,r=e.size/1024/1024<2;return t||a||this.$message.error("上传图片只能是 JPG或png 格式!"),r||this.$message.error("上传图片大小不能超过 2MB!"),(t||a)&&r},handlePictureCardPreview:function(e){console.log(e)},uploadProductUrl:function(e){console.log(e),console.log("uploadSuccess"),this.merchant.imageUrl=e.data},checkType:function(e){console.log(e),this.merchant.file=e.raw,void 0!=window.createObjectURL?this.merchant.imageUrl=window.createObjectURL(e.raw):void 0!=window.URL?this.merchant.imageUrl=window.URL.createObjectURL(e.raw):void 0!=window.webkitURL&&(this.merchant.imageUrl=window.webkitURL.createObjectURL(e.raw))},onSubmit:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return t.$message({message:"验证失败",type:"error",duration:1e3}),!1;t.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(t.isEdit){var a=new URLSearchParams;a.append("merchantName",t.merchant.merchantName);t.merchant.companyId,t.merchant.companyName,t.merchant.companyTaxnumber,t.merchant.companyIntroduction,t.merchant.activated;Object(o.a)(a).then(function(a){t.$refs[e].resetFields(),t.$message({message:"提交成功",type:"success",duration:1e3}),t.$router.back()})}else t.params.append("merchantName",t.merchant.merchantName),Object(o.a)(t.params).then(function(a){t.$refs[e].resetFields(),t.merchant=n()({},d),t.$message({message:"提交成功",type:"success",duration:1e3})})})})},resetForm:function(e){this.$refs[e].resetFields(),this.merchant=n()({},d)}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[a("el-form",{ref:"merchantFrom",attrs:{model:e.merchant,rules:e.rules,"label-width":"150px",size:"small"}},[a("el-form-item",{attrs:{label:"店铺名：",prop:"name"}},[a("el-input",{staticClass:"input-width",model:{value:e.merchant.merchantName,callback:function(t){e.$set(e.merchant,"merchantName",t)},expression:"merchant.merchantName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人：",prop:"name"}},[a("el-input",{staticClass:"input-width",model:{value:e.merchant.manager,callback:function(t){e.$set(e.merchant,"manager",t)},expression:"merchant.manager"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"负责人联系电话：",prop:"name"}},[a("el-input",{staticClass:"input-width",model:{value:e.merchant.mobile,callback:function(t){e.$set(e.merchant,"mobile",t)},expression:"merchant.mobile"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺图标："}},[a("el-upload",{attrs:{action:"#","list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUpload,"file-list":e.fileList,multiple:"","http-request":e.uploadFile}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),a("el-form-item",{attrs:{label:"店铺简介："}},[a("quillEditor",{ref:"myTextEditor",attrs:{options:e.quillOption},model:{value:e.merchant.description,callback:function(t){e.$set(e.merchant,"description",t)},expression:"merchant.description"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("merchantFrom")}}},[e._v("提交")]),e._v(" "),e.isEdit?e._e():a("el-button",{on:{click:function(t){return e.resetForm("merchantFrom")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(p,h,!1,function(e){a("Cf1U")},"data-v-f271b0e2",null);t.default=f.exports},Cf1U:function(e,t){}});
//# sourceMappingURL=39.15a740728cb02ad6d7c1.js.map