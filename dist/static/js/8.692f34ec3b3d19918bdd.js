webpackJsonp([8],{VUPq:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={name:"addHomeAdvertise",components:{HomeAdvertiseDetail:r("eXDv").a}},s={render:function(){var e=this.$createElement;return(this._self._c||e)("home-advertise-detail",{attrs:{isEdit:!1}})},staticRenderFns:[]};var i=r("VU/8")(a,s,!1,function(e){r("x/u9")},null,null);t.default=i.exports},eXDv:function(e,t,r){"use strict";var a=r("woOf"),s=r.n(a),i=r("TZVV"),o=r("Mdfv"),n=r("KA92"),l=[{label:"PC首页轮播",value:1},{label:"APP首页轮播",value:2}],d={bannerName:null,jumpUrl:null,bannerType:1,description:null,sortIndex:0,imageUrl:null,startDate:null,endDate:null,status:0},m={name:"HomeAdvertiseDetail",components:{SingleUpload:i.a},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{homeAdvertise:null,uploadPath:n.c,rules:{bannerName:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],jumpUrl:[{required:!0,message:"请输入广告链接",trigger:"blur"}],startDate:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endDate:[{required:!0,message:"请选择到期时间",trigger:"blur"}],imageUrl:[{required:!0,message:"请选择广告图片",trigger:"blur"}]},typeOptions:s()({},l)}},created:function(){var e=this;console.log(n.c),console.log(this.uploadPath),this.isEdit?(console.log("bannerId is"+this.$route.query.bannerId),Object(o.e)(this.$route.query.bannerId).then(function(t){e.homeAdvertise=t.data})):this.homeAdvertise=s()({},d)},methods:{handlePictureCardPreview:function(e){console.log(e)},uploadProductUrl:function(e){console.log(e),console.log("uploadSuccess"),this.homeAdvertise.imageUrl=e.data},checkType:function(e){console.log(e),this.homeAdvertise.file=e.raw,void 0!=window.createObjectURL?this.homeAdvertise.imageUrl=window.createObjectURL(e.raw):void 0!=window.URL?this.homeAdvertise.imageUrl=window.URL.createObjectURL(e.raw):void 0!=window.webkitURL&&(this.homeAdvertise.imageUrl=window.webkitURL.createObjectURL(e.raw))},onSubmit:function(e){var t=this,r=new FormData;this.$refs[e].validate(function(a){if(!a)return t.$message({message:"验证失败",type:"error",duration:1e3}),!1;t.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.isEdit?(console.log(t.homeAdvertise),r.append("file",t.homeAdvertise.file),r.append("jumpUrl",t.homeAdvertise.jumpUrl),r.append("bannerName",t.homeAdvertise.bannerName),r.append("bannerType",t.homeAdvertise.bannerType),r.append("description",t.homeAdvertise.description),r.append("sortIndex",t.homeAdvertise.sortIndex),r.append("startDate",t.homeAdvertise.startDate),r.append("endDate",t.homeAdvertise.endDate),r.append("activated",t.homeAdvertise.activated),console.log(r),Object(o.f)(t.$route.query.bannerId,r).then(function(r){t.$refs[e].resetFields(),t.$message({message:"修改成功",type:"success",duration:1e3}),t.$router.back()})):Object(o.b)(t.homeAdvertise).then(function(r){t.$refs[e].resetFields(),t.homeAdvertise=s()({},d),t.$message({message:"提交成功",type:"success",duration:1e3})})})})},resetForm:function(e){this.$refs[e].resetFields(),this.homeAdvertise=s()({},d)}}},c={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[r("el-form",{ref:"homeAdvertiseFrom",attrs:{model:e.homeAdvertise,rules:e.rules,"label-width":"150px",size:"small"}},[r("el-form-item",{attrs:{label:"广告名称：",prop:"name"}},[r("el-input",{staticClass:"input-width",model:{value:e.homeAdvertise.bannerName,callback:function(t){e.$set(e.homeAdvertise,"bannerName",t)},expression:"homeAdvertise.bannerName"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"广告位置："}},[r("el-select",{model:{value:e.homeAdvertise.bannerType,callback:function(t){e.$set(e.homeAdvertise,"bannerType",t)},expression:"homeAdvertise.bannerType"}},e._l(e.typeOptions,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"开始时间：",prop:"startTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期"},model:{value:e.homeAdvertise.startDate,callback:function(t){e.$set(e.homeAdvertise,"startDate",t)},expression:"homeAdvertise.startDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"到期时间：",prop:"endTime"}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期"},model:{value:e.homeAdvertise.endDate,callback:function(t){e.$set(e.homeAdvertise,"endDate",t)},expression:"homeAdvertise.endDate"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"上线/下线："}},[r("el-radio-group",{model:{value:e.homeAdvertise.status,callback:function(t){e.$set(e.homeAdvertise,"status",t)},expression:"homeAdvertise.status"}},[r("el-radio",{attrs:{label:2}},[e._v("下线")]),e._v(" "),r("el-radio",{attrs:{label:1}},[e._v("上线")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"广告图片："}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"none","show-file-list":!1,"on-success":e.uploadProductUrl,"on-change":e.checkType,accept:".jpg,.jpeg,.png,.gif"}},[e.homeAdvertise.imageUrl?r("img",{staticClass:"avatar",attrs:{src:e.homeAdvertise.imageUrl}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),e._v(" "),r("el-form-item",{attrs:{label:"排序："}},[r("el-input",{staticClass:"input-width",model:{value:e.homeAdvertise.sortIndex,callback:function(t){e.$set(e.homeAdvertise,"sortIndex",t)},expression:"homeAdvertise.sortIndex"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"广告链接：",prop:"url"}},[r("el-input",{staticClass:"input-width",model:{value:e.homeAdvertise.jumpUrl,callback:function(t){e.$set(e.homeAdvertise,"jumpUrl",t)},expression:"homeAdvertise.jumpUrl"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"广告备注："}},[r("el-input",{staticClass:"input-width",attrs:{type:"textarea",rows:5,placeholder:"请输入内容"},model:{value:e.homeAdvertise.description,callback:function(t){e.$set(e.homeAdvertise,"description",t)},expression:"homeAdvertise.description"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("homeAdvertiseFrom")}}},[e._v("提交")]),e._v(" "),e.isEdit?e._e():r("el-button",{on:{click:function(t){return e.resetForm("homeAdvertiseFrom")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var u=r("VU/8")(m,c,!1,function(e){r("lpr/")},"data-v-5fadec6a",null);t.a=u.exports},"lpr/":function(e,t){},"x/u9":function(e,t){}});
//# sourceMappingURL=8.692f34ec3b3d19918bdd.js.map