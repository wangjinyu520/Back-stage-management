webpackJsonp([41],{CZiG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("mvHQ"),r=i.n(a),l=i("woOf"),n=i.n(l),o=i("G0J2"),s=i("+yKa"),c=(i("3f40"),i("4qOc"),i("+cgv"),i("TZVV")),u=i("Ty/O"),m=i("KA92"),d=[{label:"灯光师",value:1},{label:"音响师",value:2},{label:"视频师",value:3},{label:"项目经理",value:4},{label:"搭建",value:5},{label:"舞美",value:6}],v=[{label:"男",value:1},{label:"女",value:2}],p={bannerName:null,jumpUrl:null,bannerType:1,description:null,sortIndex:0,imageUrl:null,startDate:null,endDate:null,activityFree:0,status:0},g={name:"HomeActivityDetail",components:{SingleUpload:c.a,quillEditor:o.quillEditor},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{dialogVisible:!1,dialogImageUrl:"",params:new FormData,fileList:[],quillOption:s.a,activity:null,uploadPath:m.c,rules:{bannerName:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],activityTheme:[{required:!0,message:"请输入活动主题",trigger:"blur"},{min:2,message:"活动主题不少于两个字",trigger:"blur"},{max:25,message:"活动主题最多25个字",trigger:"blur"}],jumpUrl:[{required:!0,message:"请输入广告链接",trigger:"blur"}],startDate:[{required:!0,message:"请选择开始时间",trigger:"blur"}],contact:[{required:!0,message:"联系方式不能为空",trigger:"blur"},{min:11,max:11,message:"手机号长度为11位",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],endDate:[{required:!0,message:"请选择到期时间",trigger:"blur"}],imageUrl:[{required:!0,message:"请选择广告图片",trigger:"blur"}]},typeOptions:n()({},d),genderOptions:n()({},v)}},created:function(){this.isEdit?(console.log("activityId is"+this.$route.query.activityId),(new URLSearchParams).append("companyId",this.$route.query.companyId)):this.activity=n()({},p)},methods:{addFormItem:function(e,t){},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},uploadProductUrl:function(e){console.log(e),console.log("uploadSuccess"),this.activity.imageUrl=e.data},handleRemove:function(e,t){for(var i in this.picList)this.picList[i].key===e.uid&&this.picList.splice(i,1)},uploadFile:function(e){this.params.append("logo",e.file)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,i="image/png"===e.type,a=e.size/1024/1024<2;return t||i||this.$message.error("上传图片只能是 JPG或png 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),(t||i)&&a},checkType:function(e){console.log(e),this.activity.file=e.raw,void 0!=window.createObjectURL?this.activity.imageUrl=window.createObjectURL(e.raw):void 0!=window.URL?this.activity.imageUrl=window.URL.createObjectURL(e.raw):void 0!=window.webkitURL&&(this.activity.imageUrl=window.webkitURL.createObjectURL(e.raw))},onSubmit:function(e){var t=this;this.$refs[e].validate(function(i){if(!i)return t.$message({message:"验证失败",type:"error",duration:1e3}),!1;t.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(t.isEdit){var i={companyId:t.activity.companyId,companyName:t.activity.companyName,companyTaxnumber:t.activity.companyTaxnumber,contact:t.activity.contact,companyIntroduction:t.activity.companyIntroduction,activated:t.activity.activated};console.log(r()(i)),Object(u.h)(i).then(function(i){t.$refs[e].resetFields(),t.$message({message:"修改成功",type:"success",duration:1e3}),t.$router.back()})}else Object(u.b)(t.activity).then(function(i){t.$refs[e].resetFields(),t.activity=n()({},p),t.$message({message:"提交成功",type:"success",duration:1e3})})})})},resetForm:function(e){this.$refs[e].resetFields(),this.activity=n()({},p)}}},y={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[i("el-form",{ref:"companyFrom",attrs:{model:e.activity,rules:e.rules,"label-width":"150px",size:"small"}},[i("el-form-item",{attrs:{label:"活动主题：",prop:"activityTheme"}},[i("el-input",{staticClass:"input-width",model:{value:e.activity.activityTheme,callback:function(t){e.$set(e.activity,"activityTheme",t)},expression:"activity.activityTheme"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动封面：",prop:"name"}},[i("el-upload",{attrs:{action:"#",limit:1,"list-type":"picture-card","on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"before-upload":e.beforeAvatarUpload,"file-list":e.fileList,multiple:"","http-request":e.uploadFile}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),i("el-form-item",{attrs:{label:"活动咨询电话：",prop:"contact"}},[i("el-input",{staticClass:"input-width",model:{value:e.activity.activityPhone,callback:function(t){e.$set(e.activity,"activityPhone",t)},expression:"activity.activityPhone"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"活动是否免费："}},[i("el-radio-group",{attrs:{onclick:"addFormItem()"},model:{value:e.activity.activityFree,callback:function(t){e.$set(e.activity,"activityFree",t)},expression:"activity.activityFree"}},[i("el-radio",{attrs:{label:1}},[e._v("免费")]),e._v(" "),i("el-radio",{attrs:{label:0}},[e._v("不免费")])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"活动价格：",prop:"originalPrice"}},[i("el-input",{staticClass:"input-width",attrs:{placeholder:"面值只能是数值，限2位小数"},model:{value:e.activity.activityFee,callback:function(t){e.$set(e.activity,"activityFee",e._n(t))},expression:"activity.activityFee"}},[i("template",{slot:"append"},[e._v("元")])],2)],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onSubmit("companyFrom")}}},[e._v("提交")]),e._v(" "),e.isEdit?e._e():i("el-button",{on:{click:function(t){return e.resetForm("companyFrom")}}},[e._v("重置")])],1)],1)],1)},staticRenderFns:[]};var b=i("VU/8")(g,y,!1,function(e){i("wRrJ")},"data-v-d36fd6e0",null);t.default=b.exports},wRrJ:function(e,t){}});
//# sourceMappingURL=41.b60277ddd87fdd13b211.js.map