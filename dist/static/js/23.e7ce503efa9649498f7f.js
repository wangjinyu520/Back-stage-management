webpackJsonp([23],{Pire:function(t,i){},m2Lg:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("mvHQ"),l=e.n(a),r=e("woOf"),c=e.n(r),s=e("G0J2"),o=e("+yKa"),n=(e("3f40"),e("4qOc"),e("+cgv"),e("TZVV")),v=e("Ty/O"),u=e("KA92"),y=[{label:"灯光师",value:1},{label:"音响师",value:2},{label:"视频师",value:3},{label:"项目经理",value:4},{label:"搭建",value:5},{label:"舞美",value:6}],m=[{label:"男",value:1},{label:"女",value:2}],d=[{label:"免费",value:1},{label:"不免费",value:0}],p={activityTheme:null,bannerName:null,jumpUrl:null,bannerType:1,description:null,sortIndex:0,imageUrl:null,startDate:null,endDate:null,status:0},g={name:"HomeActivityDetail",components:{SingleUpload:n.a,quillEditor:s.quillEditor},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{activityFreeOptions:c()({},d),dialogVisible:!1,dialogImageUrl:"",params:new FormData,fileList:[],quillOption:o.a,activity:{activityTheme:null},uploadPath:u.c,rules:{fee:[{type:"number",required:!0,message:"活动费用只能是数值，0.01-10000，限2位小数",trigger:"blur"}],bannerName:[{required:!0,message:"请输入广告名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],activityTheme:[{required:!0,message:"请输入活动主题",trigger:"blur"},{min:2,message:"活动主题不少于两个字",trigger:"blur"},{max:25,message:"活动主题最多25个字",trigger:"blur"}],jumpUrl:[{required:!0,message:"请输入广告链接",trigger:"blur"}],startDate:[{required:!0,message:"请选择开始时间",trigger:"blur"}],activityPhone:[{required:!0,message:"联系方式不能为空",trigger:"blur"},{min:11,max:11,message:"手机号长度为11位",trigger:"blur"},{pattern:/^1[3456789]\d{9}$/,message:"手机号码格式不正确",trigger:"blur"}],endDate:[{required:!0,message:"请选择到期时间",trigger:"blur"}],imageUrl:[{required:!0,message:"请选择广告图片",trigger:"blur"}]},typeOptions:c()({},y),genderOptions:c()({},m)}},created:function(){var t=this;if(this.isEdit){console.log("activityId is"+this.$route.query.activityId),console.log("process.env.BASE_APIhttp://localhost:8080/wumei-server");var i=new URLSearchParams;i.append("activityId",this.$route.query.activityId),Object(v.f)(i).then(function(i){t.activity=i.data,1==t.activity.activityFree?t.activity.activityFree="不免费":t.activity.activityFree="免费",console.log("更新前的活动信息：",l()(t.activity))})}else this.activity=c()({},p)},methods:{handlePictureCardPreview:function(t){this.dialogImageUrl=t.url,this.dialogVisible=!0},handleRemove:function(t){for(var i in this.fileList)this.fileList[i].key===t.uid&&this.fileList.splice(i,1)},uploadFile:function(t){this.params.append("logo",t.file)},beforeAvatarUpload:function(t){var i="image/jpeg"===t.type,e="image/png"===t.type,a=t.size/1024/1024<2;return i||e||this.$message.error("上传图片只能是 JPG或png 格式!"),a||this.$message.error("上传图片大小不能超过 2MB!"),this.activity.activityLogo=this.dialogImageUrl,(i||e)&&a},uploadProductUrl:function(t){console.log(t),console.log("uploadSuccess"),this.activity.imageUrl=t.data},checkType:function(t){console.log(t),this.activity.file=t.raw,void 0!=window.createObjectURL?this.activity.imageUrl=window.createObjectURL(t.raw):void 0!=window.URL?this.activity.imageUrl=window.URL.createObjectURL(t.raw):void 0!=window.webkitURL&&(this.activity.imageUrl=window.webkitURL.createObjectURL(t.raw))},onSubmit:function(t){var i=this;this.$refs[t].validate(function(e){if(!e)return i.$message({message:"验证失败",type:"error",duration:1e3}),!1;i.$confirm("是否提交数据","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(i.isEdit){if(null===i.activity.activityStartTime)return void i.$alert("请选择活动开始时间","提示",{confirmButtonText:"确定",type:"error"});if(null===i.activity.activityEndTime)return void i.$alert("请选择活动结束时间","提示",{confirmButtonText:"确定",type:"error"});if(i.activity.activityEndTime<=i.activity.activityStartTime)return void i.$alert("开始时间不能晚于结束时间","提示",{confirmButtonText:"确定",type:"error"});1===i.activity.activityFree&&(i.activity.activityFee=0);var e={activityId:i.activity.activityId,companyId:i.activity.companyId,activityTheme:i.activity.activityTheme,activityLogo:i.activity.activityLogo,activityStartTime:i.activity.activityStartTime,activityEndTime:i.activity.activityEndTime,activityPhone:i.activity.activityPhone,ticket:i.activity.ticket,activated:i.activity.activated};i.params.append("activity",l()(e)),console.log("更新后的活动信息："+l()(i.activity))}else Object(v.b)(i.activity).then(function(e){i.$refs[t].resetFields(),i.activity=c()({},p),i.$message({message:"提交成功",type:"success",duration:1e3})})})})},resetForm:function(t){this.$refs[t].resetFields(),this.activity=c()({},p)}}},f={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[e("el-form",{ref:"activityForm",attrs:{model:t.activity,rules:t.rules,"label-width":"150px",size:"small"}},[e("el-form-item",{attrs:{label:"活动主题：",prop:"activityTheme"}},[e("el-input",{staticClass:"input-width",model:{value:t.activity.activityTheme,callback:function(i){t.$set(t.activity,"activityTheme",i)},expression:"activity.activityTheme"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"活动封面：",prop:"name"}},[e("el-upload",{attrs:{action:"#",limit:1,"list-type":"picture-card","on-preview":t.handlePictureCardPreview,"on-remove":t.handleRemove,"before-upload":t.beforeAvatarUpload,"file-list":t.fileList,multiple:"","http-request":t.uploadFile}},[t.activity.activityLogo?e("img",{staticClass:"avatar",staticStyle:{width:"148px",height:"148px"},attrs:{src:t.activity.activityLogo}}):t._e(),t._v(" "),e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(i){t.dialogVisible=i}}},[e("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1),t._v(" "),e("el-form-item",{attrs:{label:"活动开始时间："}},[e("el-date-picker",{staticClass:"input-width",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择时间"},model:{value:t.activity.activityStartTime,callback:function(i){t.$set(t.activity,"activityStartTime",i)},expression:"activity.activityStartTime"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"活动结束时间："}},[e("el-date-picker",{staticClass:"input-width",attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"请选择时间"},model:{value:t.activity.activityEndTime,callback:function(i){t.$set(t.activity,"activityEndTime",i)},expression:"activity.activityEndTime"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"是否免费："}},[e("el-select",{model:{value:t.activity.activityFree,callback:function(i){t.$set(t.activity,"activityFree",i)},expression:"activity.activityFree"}},t._l(t.activityFreeOptions,function(t){return e("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),"不免费"==t.activity.activityFree?e("el-form-item",{attrs:{label:"活动费用："}},[e("el-input",{staticClass:"input-width",attrs:{placeholder:"费用只能是数值，限2位小数"},model:{value:t.activity.activityFee,callback:function(i){t.$set(t.activity,"activityFee",t._n(i))},expression:"activity.activityFee"}},[e("template",{slot:"append"},[t._v("元")])],2)],1):t._e(),t._v(" "),"0"==t.activity.activityFree?e("el-form-item",{attrs:{label:"活动费用："}},[e("el-input",{staticClass:"input-width",attrs:{placeholder:"费用只能是数值，限2位小数"},model:{value:t.activity.activityFee,callback:function(i){t.$set(t.activity,"activityFee",t._n(i))},expression:"activity.activityFee"}},[e("template",{slot:"append"},[t._v("元")])],2)],1):t._e(),t._v(" "),e("el-form-item",{attrs:{label:"活动咨询电话：",prop:"activityPhone"}},[e("el-input",{staticClass:"input-width",model:{value:t.activity.activityPhone,callback:function(i){t.$set(t.activity,"activityPhone",i)},expression:"activity.activityPhone"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"活动状态："}},[e("el-radio-group",{model:{value:t.activity.activated,callback:function(i){t.$set(t.activity,"activated",i)},expression:"activity.activated"}},[e("el-radio",{attrs:{label:0}},[t._v("还未开始")]),t._v(" "),e("el-radio",{attrs:{label:1}},[t._v("正在进行")]),t._v(" "),e("el-radio",{attrs:{label:2}},[t._v("已结束")]),t._v(" "),e("el-radio",{attrs:{label:3}},[t._v("截止报名")])],1)],1),t._v(" "),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(i){return t.onSubmit("activityForm")}}},[t._v("提交")]),t._v(" "),t.isEdit?t._e():e("el-button",{on:{click:function(i){return t.resetForm("activityForm")}}},[t._v("重置")])],1)],1)],1)},staticRenderFns:[]};var b={name:"HomeActivityDetail",components:{HomeAdvertiseDetail:e("VU/8")(g,f,!1,function(t){e("Pire")},"data-v-817e7572",null).exports}},h={render:function(){var t=this.$createElement;return(this._self._c||t)("home-advertise-detail",{attrs:{isEdit:!0}})},staticRenderFns:[]};var w=e("VU/8")(b,h,!1,function(t){e("ouyg")},null,null);i.default=w.exports},ouyg:function(t,i){}});
//# sourceMappingURL=23.e7ce503efa9649498f7f.js.map