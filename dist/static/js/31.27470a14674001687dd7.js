webpackJsonp([31],{"604X":function(e,t){},HVx0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("woOf"),l=n.n(a),i=n("wc4o"),o=n("caBC"),s={keyword:null,pageNum:1,pageSize:5,companyId:null,publishStatus:null,verifyStatus:null,productSn:null,productCategoryId:null,brandId:null,activated:null,commodityName:null,commodityType:null},u={name:"productList",data:function(){return{editSkuInfo:{dialogVisible:!1,productId:null,productSn:"",productAttributeCategoryId:null,stockList:[],keyword:null,specifications:["标准"]},operates:[{label:"商品上架",value:"publishOn"},{label:"商品下架",value:"publishOff"},{label:"设为推荐",value:"recommendOn"},{label:"取消推荐",value:"recommendOff"},{label:"删除",value:"recycle"}],operateType:null,listQuery:l()({},s),list:null,total:null,listLoading:!0,selectProductCateValue:null,multipleSelection:[],productTypeOptions:[{value:1,label:"灯光"},{value:2,label:"音响"},{value:3,label:"视频"}],brandOptions:[],publishStatusOptions:[{value:1,label:"上架"},{value:2,label:"下架"}],verifyStatusOptions:[{value:2,label:"审核通过"},{value:1,label:"待审核"}]}},created:function(){this.getList()},watch:{selectProductCateValue:function(e){null!=e&&2==e.length?this.listQuery.productType=e[1]:this.listQuery.productType=null}},filters:{commodityType:function(e){return 1===e?"灯光 ":2===e?"音响":"视频"},verifyStatusFilter:function(e){return 1===e?"上架":2===e?"下架":"未上架"}},methods:{getProductSkuSp:function(e,t){return 0===t?e.sp1:1===t?e.sp2:e.sp3},getList:function(){var e=this;this.listLoading=!0,console.log("-------------userIcon"+this.$store.getters.userIcon),4===this.$store.getters.roles&&(this.listQuery.companyId=this.$store.getters.userId),Object(i.f)(this.listQuery).then(function(t){e.listLoading=!1,e.list=t.data,e.total=t.total,e.brandOptions=[];for(var n=0;n<e.list.length;n++){var a=e.list[n].commodityIcon.split(",")[0];e.list[n].commodityIcon=a}})},handleShowSkuEditDialog:function(e,t){var n=this;this.editSkuInfo.dialogVisible=!0,this.editSkuInfo.productId=t.productId,this.editSkuInfo.productSn=t.productSn,this.editSkuInfo.specifications=t.specifications,this.editSkuInfo.keyword=null,Object(o.a)(t.productId,{keyword:this.editSkuInfo.keyword}).then(function(e){n.editSkuInfo.stockList=e.data})},handleSearchEditSku:function(){var e=this;Object(o.a)(this.editSkuInfo.productId,{stockId:this.editSkuInfo.keyword}).then(function(t){e.editSkuInfo.stockList=t.data})},handleEditSkuConfirm:function(){var e=this;null==this.editSkuInfo.stockList||this.editSkuInfo.stockList.length<=0?this.$message({message:"暂无sku信息",type:"warning",duration:1e3}):this.$confirm("是否要进行修改","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e.editSkuInfo),Object(o.b)(e.editSkuInfo.productId,e.editSkuInfo.stockList).then(function(t){e.$message({message:"修改成功",type:"success",duration:1e3}),e.editSkuInfo.dialogVisible=!1})})},handleSearchList:function(){this.listQuery.pageNum=1,this.getList()},handleAddCommodity:function(){this.$router.push({path:"/wms/addCommodity"})},handleBatchOperate:function(){var e=this;null!=this.operateType?null==this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要操作的商品",type:"warning",duration:1e3}):this.$confirm("是否要进行该批量操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var t=[],n=0;n<e.multipleSelection.length;n++)t.push(e.multipleSelection[n].productId);switch(e.operateType){case e.operates[0].value:e.batchUpdatePublishStatus(2,t);break;case e.operates[1].value:e.batchUpdatePublishStatus(4,t);break;case e.operates[2].value:console.log("设为推荐"),e.batchUpdateRecommendStatus(1,t);break;case e.operates[3].value:console.log("取消推荐"),e.batchDeleteRecommendStatus(0,t);break;case e.operates[4].value:console.log("批量删除"),e.batchDelete(t);break;case e.operates[5].value:case e.operates[6].value:case e.operates[7].value:}e.getList()}):this.$message({message:"请选择操作类型",type:"warning",duration:1e3})},handleSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()},handleSelectionChange:function(e){this.multipleSelection=e},handlePublishStatusChange:function(e,t){var n=[];n.push(t.commodityId),this.updatePublishStatus(t.recommend,n)},handlePublishActivatedChange:function(e,t){var n=[];n.push(t.commodityId),this.updatePublishActivated(t.activated,n)},handleNewStatusChange:function(e,t){var n=[];n.push(t.productId),this.updateNewStatus(t.isScoreProduct,n)},handleRecommendStatusChange:function(e,t){var n=[];n.push(t.id),this.updateRecommendStatus(t.recommandStatus,n)},handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=l()({},s)},handleDelete:function(e){var t=this;this.$confirm("是否要进行删除操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.updateDeleteStatus(e.commodityId),t.getList()})},handleUpdateProduct:function(e,t){this.$router.push({path:"/wms/updateCommodity",query:{commodityId:t.commodityId,queryType:2}})},handleShowProduct:function(e,t){this.$router.push({path:"/wms/updateCommodity",query:{commodityId:t.commodityId,queryType:2}})},handleShowVerifyDetail:function(e,t){console.log("handleShowVerifyDetail",t)},handleShowLog:function(e,t){console.log("handleShowLog",t)},updatePublishStatus:function(e,t){var n=this,a=new URLSearchParams;a.append("commodityId",t),a.append("recommend",e),Object(i.j)(a).then(function(e){n.$message({message:"修改成功",type:"success",duration:1e3})})},updatePublishActivated:function(e,t){var n=this,a=new URLSearchParams;a.append("commodityId",t),a.append("activated",e),Object(i.i)(a).then(function(e){n.$message({message:"商品上下架状态修改成功",type:"success",duration:1e3})})},updateNewStatus:function(e,t){var n=this,a=new URLSearchParams;a.append("ids",t),a.append("isScoreProduct",e),Object(i.l)(a).then(function(e){n.$message({message:"修改成功",type:"success",duration:1e3})})},updateRecommendStatus:function(e,t){var n=this,a=new URLSearchParams;a.append("ids",t),a.append("recommendStatus",e),Object(i.m)(a).then(function(e){n.$message({message:"修改成功",type:"success",duration:1e3})})},batchDeleteRecommendStatus:function(e,t){var n=this,a=new URLSearchParams;a.append("ids",t),a.append("recommendStatus",e),Object(i.b)(a).then(function(e){n.$message({message:"设置成功",type:"success",duration:1e3})})},batchUpdateRecommendStatus:function(e,t){var n=this,a=new URLSearchParams;a.append("ids",t),a.append("recommendStatus",e),Object(i.d)(a).then(function(e){n.$message({message:"设置成功",type:"success",duration:1e3})})},batchUpdatePublishStatus:function(e,t){var n=this,a=new URLSearchParams;a.append("ids",t),a.append("isOnSale",e),Object(i.c)(a).then(function(e){n.$message({message:"修改成功",type:"success",duration:1e3})})},batchDelete:function(e){var t=this,n=new URLSearchParams;n.append("productIds",e),Object(i.a)(n).then(function(e){t.$message({message:"删除成功",type:"success",duration:1e3}),t.getList()})},updateDeleteStatus:function(e){var t=this,n=new URLSearchParams;n.append("commodityId",e),Object(i.k)(n).then(function(e){t.$message({message:"删除成功",type:"success",duration:1e3})}),this.getList()}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[n("div",[n("i",{staticClass:"el-icon-search"}),e._v(" "),n("span",[e._v("筛选搜索")]),e._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleSearchList()}}},[e._v("\n          查询结果\n        ")]),e._v(" "),n("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(t){return e.handleResetSearch()}}},[e._v("\n          重置\n        ")])],1),e._v(" "),n("div",{staticStyle:{"margin-top":"15px"}},[n("el-form",{attrs:{inline:!0,model:e.listQuery,size:"small","label-width":"140px"}},[n("el-form-item",{attrs:{label:"严选商品类型："}},[n("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:e.listQuery.commodityType,callback:function(t){e.$set(e.listQuery,"commodityType",t)},expression:"listQuery.commodityType"}},e._l(e.productTypeOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),n("el-form-item",{attrs:{label:"上架状态："}},[n("el-select",{attrs:{placeholder:"全部",clearable:""},model:{value:e.listQuery.activated,callback:function(t){e.$set(e.listQuery,"activated",t)},expression:"listQuery.activated"}},e._l(e.publishStatusOptions,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1)],1)],1)]),e._v(" "),n("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[n("i",{staticClass:"el-icon-tickets"}),e._v(" "),n("span",[e._v("数据列表")]),e._v(" "),n("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(t){return e.handleAddCommodity()}}},[e._v("\n        添加\n      ")])],1),e._v(" "),n("div",{staticClass:"table-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"productTable",staticStyle:{width:"100%"},attrs:{data:e.list,border:""},on:{"selection-change":e.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"60",align:"center"}}),e._v(" "),n("el-table-column",{attrs:{label:"严选商品编号",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.commodityId))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"严选商品名称",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.commodityName))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"严选商品类型",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("commodityType")(t.row.commodityType)))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"来源",width:"170",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.companyName))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"商品图片",width:"180",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticStyle:{height:"80px"},attrs:{src:e.row.commodityIcon}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"价格/单位",width:"186",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v("价格：￥"+e._s(t.row.rent))]),e._v(" "),n("p",[e._v("单位："+e._s(t.row.unit))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"推荐",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v("推荐：\n              "),n("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(n){return e.handlePublishStatusChange(t.$index,t.row)}},model:{value:t.row.recommend,callback:function(n){e.$set(t.row,"recommend",n)},expression:"scope.row.recommend"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"品牌",width:"145",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.brand))]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"上下架状态",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v(e._s(e._f("verifyStatusFilter")(t.row.activated)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"上下架",width:"140",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[e._v("上下架：\n              "),n("el-switch",{attrs:{"active-value":1,"inactive-value":2},on:{change:function(n){return e.handlePublishActivatedChange(t.$index,t.row)}},model:{value:t.row.activated,callback:function(n){e.$set(t.row,"activated",n)},expression:"scope.row.activated"}})],1)]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("p",[n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleShowProduct(t.$index,t.row)}}},[e._v("查看\n              ")]),e._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(n){return e.handleUpdateProduct(t.$index,t.row)}}},[e._v("编辑\n              ")])],1),e._v(" "),n("p",[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return e.handleDelete(t.row)}}},[e._v("删除\n              ")])],1)]}}])})],1)],1),e._v(" "),n("div",{staticClass:"batch-operate-container"},[n("el-select",{attrs:{size:"small",placeholder:"批量操作"},model:{value:e.operateType,callback:function(t){e.operateType=t},expression:"operateType"}},e._l(e.operates,function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),e._v(" "),n("el-button",{staticClass:"search-button",staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"},on:{click:function(t){return e.handleBatchOperate()}}},[e._v("\n        确定\n      ")])],1),e._v(" "),n("div",{staticClass:"pagination-container"},[n("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":e.listQuery.pageSize,"page-sizes":[5,10,15],"current-page":e.listQuery.pageNum,total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){return e.$set(e.listQuery,"pageNum",t)},"update:current-page":function(t){return e.$set(e.listQuery,"pageNum",t)}}})],1),e._v(" "),n("el-dialog",{attrs:{title:"编辑货品信息",visible:e.editSkuInfo.dialogVisible,width:"40%"},on:{"update:visible":function(t){return e.$set(e.editSkuInfo,"dialogVisible",t)}}},[n("span",[e._v("商品货号：")]),e._v(" "),n("span",[e._v(e._s(e.editSkuInfo.productSn))]),e._v(" "),n("el-input",{staticStyle:{width:"50%","margin-left":"20px"},attrs:{placeholder:"按sku编号搜索",size:"small"},model:{value:e.editSkuInfo.keyword,callback:function(t){e.$set(e.editSkuInfo,"keyword",t)},expression:"editSkuInfo.keyword"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.handleSearchEditSku},slot:"append"})],1),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.editSkuInfo.stockList,border:""}},[n("el-table-column",{attrs:{label:"SKU编号",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n           "+e._s(t.row.stockId)+"\n          ")]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"value",label:"货品规格"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.specifications,function(t){return n("el-tag",{key:t},[e._v("\n              "+e._s(t)+"\n            ")])})}}])}),e._v(" "),n("el-table-column",{attrs:{label:"销售价格",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.salePrice,callback:function(n){e.$set(t.row,"salePrice",n)},expression:"scope.row.salePrice"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"商品库存",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.stock,callback:function(n){e.$set(t.row,"stock",n)},expression:"scope.row.stock"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"库存预警值",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-input",{model:{value:t.row.lowStock,callback:function(n){e.$set(t.row,"lowStock",n)},expression:"scope.row.lowStock"}})]}}])})],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.editSkuInfo.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.handleEditSkuConfirm}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")(u,c,!1,function(e){n("604X")},null,null);t.default=r.exports},caBC:function(e,t,n){"use strict";t.a=function(e,t){return Object(a.a)({url:"/stock/modifyStock/"+e,method:"get",params:t})},t.b=function(e,t){return Object(a.a)({url:"/sku/update/"+e,method:"post",data:t})};var a=n("vLgD")}});
//# sourceMappingURL=31.27470a14674001687dd7.js.map